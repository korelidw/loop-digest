<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<title>Loop Digest Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3"></script>
<style>
 body{font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:20px;}
 h1{font-size:20px;margin:0 0 8px}
 .row{display:flex;gap:16px;flex-wrap:wrap}
 .card{border:1px solid #ddd;border-radius:8px;padding:12px;flex:1;min-width:280px}
 table{border-collapse:collapse;width:100%;font-size:12px}
 th,td{border-bottom:1px solid #eee;padding:6px 8px;text-align:left}
 small{color:#666}
 canvas{max-width:100%;height:220px}
 .strip{font-size:12px;color:#333;margin:6px 0 14px}
 .muted{color:#666;font-size:12px}
 details summary{cursor:pointer}
</style>
</head>
<body>
<h1>Loop Digest Dashboard</h1>
<div class="strip">Strategy: automaticBolus · Suspend: 74 mg/dL · Targets: 95–95 · MaxBasal: 1.45 U/hr · MaxBolus: 4 U · DIA: 6h</div>
<small>Time zone: America/Chicago · Last progress update: 2026-02-11T22:14:00-06:00 · Build: 20260212-1523</small>
<div class="row">
 <div class="card"><h3>TIR/TBR/TAR</h3><canvas id="tir"></canvas><div>CV: 37.5% · GRI: 13.39 (L 1.96 / H 11.43 ) · Coverage: 100%</div></div>
 <div class="card"><h3>Safety Sentinels (Loop gating)</h3>
  <table><thead><tr><th>Day</th><th>Pred ≤ suspend</th><th>Comm errors</th></tr></thead><tbody><tr><td>2026-01-28</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">21%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">19%</span></td></tr><tr><td>2026-01-29</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">17%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">13%</span></td></tr><tr><td>2026-01-30</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">12%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">13%</span></td></tr><tr><td>2026-01-31</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">17%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">14%</span></td></tr><tr><td>2026-02-01</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">23%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">7%</span></td></tr><tr><td>2026-02-02</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:red;color:#fff;text-align:center;font-size:11px">25%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">1%</span></td></tr><tr><td>2026-02-03</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">12%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">0%</span></td></tr><tr><td>2026-02-04</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">3%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">5%</span></td></tr><tr><td>2026-02-05</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">12%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">13%</span></td></tr><tr><td>2026-02-06</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">12%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">16%</span></td></tr><tr><td>2026-02-07</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">18%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">13%</span></td></tr><tr><td>2026-02-08</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">20%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">10%</span></td></tr><tr><td>2026-02-09</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">17%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">16%</span></td></tr><tr><td>2026-02-10</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:red;color:#fff;text-align:center;font-size:11px">29%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">13%</span></td></tr><tr><td>2026-02-11</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">15%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">8%</span></td></tr><tr><td>2026-02-12</td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:green;color:#fff;text-align:center;font-size:11px">3%</span></td><td><span style="display:inline-block;min-width:24px;padding:2px 6px;border-radius:10px;background:orange;color:#fff;text-align:center;font-size:11px">17%</span></td></tr></tbody></table>
  <details class="muted"><summary>Advanced overlay</summary><canvas id="overlay"></canvas><div class="muted">Pred ≤ suspend: share of 5‑min cycles where Loop predicted at/below suspend threshold; Comm errors: pump comm failures.</div></details>
 </div>
</div>
<div class="row">
 <div class="card"><h3>AGP (14‑day)</h3><canvas id="agp"></canvas><div class="muted">Shaded bands: 25–75% (inner) and 5–95% (outer). Dashed band shows 70–180 mg/dL targets. Markers at ~7:15 and 11:30.</div></div>
 <div class="card"><h3>GRI components</h3>
  <div>Total GRI: 13.39 · LBGI: 1.96 · HBGI: 11.43 </div>
  <div class="muted">We also compute a zone‑weighted GRI for reference from TIR counts.</div>
 </div>
</div>
<div class="row">
 <div class="card"><h3>School Lunch Lens</h3>
  <table><thead><tr><th>Window</th><th>Lead bin</th><th>n</th><th>%>180</th><th>Median peak</th></tr></thead><tbody id="school"><tr><td>Breakfast 7:00–8:00</td><td>pre&gt;=20</td><td>4</td><td>100%</td><td>227</td></tr><tr><td>Breakfast 7:00–8:00</td><td>post0-9</td><td>1</td><td>100%</td><td>231</td></tr><tr><td>Breakfast 7:00–8:00</td><td>pre0-4</td><td>4</td><td>100%</td><td>239.5</td></tr><tr><td>Lunch 11:20–12:10</td><td>pre&gt;=20</td><td>1</td><td>100%</td><td>189</td></tr></tbody></table>
  <div class="muted">Weekday 11:20–12:10. Activity windows auto‑tagged/excluded from baseline metrics.</div>
 </div>
 <div class="card"><h3>Scenario Cards (first pass)</h3>
  <table><thead><tr><th>Title</th><th>Context</th><th>Lever</th><th>Dir</th><th>Conf</th></tr></thead><tbody id="scenarios"><tr><td>Lunch timing what‑if: +10 min pre‑bolus</td><td>Weekdays 11:20–12:10 (overall lunch bin)</td><td>timing,ICR</td><td>Earlier dosing likely reduces 4h TAR (directional)</td><td>Medium</td></tr><tr><td>Clean corrections: ISF sweep (±10–20%)</td><td>Anytime corrections (IOB bands; no carbs/exercise ±3–4h)</td><td>ISF</td><td>Stronger ISF increases 2–3h drops; weaker reduces under‑response (directional)</td><td>Medium</td></tr></tbody></table>
  <div class="muted">Directional only. TAR: 4h >180. Loop-aware safety applies (suspend, AB cadence/caps).</div>
 </div>
</div>
<div class="row">
 <div class="card"><h3>Top Hypotheses</h3>
  <table><thead><tr><th>Title</th><th>Lever</th><th>Dir</th><th>Confidence</th></tr></thead><tbody id="cards"><tr><td>Overnight downward drift suggests basal too strong</td><td>basal</td><td>too strong</td><td>Medium</td></tr><tr><td>Post-breakfast highs suggest ICR too weak</td><td>ICR</td><td>too weak</td><td>Medium</td></tr><tr><td>Post-lunch highs suggest ICR too weak</td><td>ICR</td><td>too weak</td><td>Medium</td></tr><tr><td>Post-dinner highs suggest ICR too weak</td><td>ICR</td><td>too weak</td><td>Medium</td></tr><tr><td>Corrections often ineffective → ISF may be too weak</td><td>ISF</td><td>too weak</td><td>Medium</td></tr></tbody></table>
 </div>
 <div class="card"><h3>Progress</h3>
  <ul><li>Force republish: 10:14 pm CT — Loop strip + Safety Sentinels + AGP (first pass) + School Lunch Lens wiring.</li><li>Next 24–36h: scenario cards (lunch timing what‑ifs; clean‑correction ISF sweeps) and GRI zone/GRI‑by‑hour visuals.</li></ul>
 </div>
</div>
<script>
 const metrics = {"meta":{"durationDays":13.99,"coverage":1,"count":8738},"tir":{"veryLow":7,"low":76,"inRange":5167,"high":3495,"veryHigh":1259},"cv":37.5,"risk":{"LBGI":1.96,"HBGI":11.43,"GRI":13.39},"dataFlags":{"possibleMissedCarbs":105}};
 const review = {"meta":{"tz":"America/Chicago","totalReadings":8738,"coverage":1,"durationDays":13.99,"tir":{"low":76,"inRange":5167,"high":3495,"veryLow":7,"veryHigh":1259}},"meals":{"breakfast":{"n":20,"pctHigh":80,"medianPeak":233,"medianTimeTo180Min":2.9338464599609377},"lunch":{"n":11,"pctHigh":90.9,"medianPeak":292,"medianTimeTo180Min":2.269292761230469},"dinner":{"n":39,"pctHigh":97.4,"medianPeak":258,"medianTimeTo180Min":3.273055206298828},"other":{"n":11,"pctHigh":100,"medianPeak":246,"medianTimeTo180Min":20.425416666666667}},"corrections":{"n":1194,"pctIneffective":59.8,"pctOvershoot":8.1,"medianDrop":16},"nights":{"n":14,"medianSlope":-14.80789121012906,"nightsLowCount":1,"nightsHighCount":8},"cards":[{"title":"Overnight downward drift suggests basal too strong","window":"00:00–04:00 local, fasting","levers":["basal"],"direction":"too strong","evidence":["Median overnight slope -14.8 mg/dL/hr (negative)","1 nights with <70","8 nights >180 (context)"],"confidence":"Medium","confounders":["late corrections","exercise carryover","sensor compression lows"],"safety":"If basal reduced incorrectly, overnight highs may increase.","next":["Confirm with a 4–6h fasting window near midnight on a quiet night; watch trend without Loop corrections."]},{"title":"Post-breakfast highs suggest ICR too weak","window":"breakfast meals","levers":["ICR"],"direction":"too weak","evidence":["20 breakfast meals analyzed","80% peaked >180","Median peak ~233 mg/dL","Median return-to-180 3 min"],"confidence":"Medium","confounders":["unannounced carbs","fat/protein delays","site absorption"],"safety":"Over-tightening ICR risks post-meal lows.","next":["Log a few breakfast meals with accurate carbs; watch 4h curve and correction needs."]},{"title":"Post-lunch highs suggest ICR too weak","window":"lunch meals","levers":["ICR"],"direction":"too weak","evidence":["11 lunch meals analyzed","90.9% peaked >180","Median peak ~292 mg/dL","Median return-to-180 2 min"],"confidence":"Medium","confounders":["unannounced carbs","fat/protein delays","site absorption"],"safety":"Over-tightening ICR risks post-meal lows.","next":["Log a few lunch meals with accurate carbs; watch 4h curve and correction needs."]},{"title":"Post-dinner highs suggest ICR too weak","window":"dinner meals","levers":["ICR"],"direction":"too weak","evidence":["39 dinner meals analyzed","97.4% peaked >180","Median peak ~258 mg/dL","Median return-to-180 3 min"],"confidence":"Medium","confounders":["unannounced carbs","fat/protein delays","site absorption"],"safety":"Over-tightening ICR risks post-meal lows.","next":["Log a few dinner meals with accurate carbs; watch 4h curve and correction needs."]},{"title":"Corrections often ineffective → ISF may be too weak","window":"Anytime corrections (no carbs)","levers":["ISF"],"direction":"too weak","evidence":["1194 corrections analyzed","59.8% had <30 mg/dL drop within 2h","Median 2h drop 16 mg/dL"],"confidence":"Medium","confounders":["insulin on board","rising meals misclassified","site issues"],"safety":"Strengthening ISF increases hypoglycemia risk if misapplied.","next":["Tag a few clean corrections (no food/exercise) and re-check 2–3h impact."]}]};
 const overlay = {"tz":"America/Chicago","suspendThreshold":74,"days":[{"day":"2026-01-28","cycles":72,"pctPredLeSuspend":20.8,"pctZeroBasal":41.7,"pctABcycles":25,"pctFailures":19.4},{"day":"2026-01-29","cycles":310,"pctPredLeSuspend":16.8,"pctZeroBasal":41.9,"pctABcycles":28.4,"pctFailures":13.2},{"day":"2026-01-30","cycles":296,"pctPredLeSuspend":11.5,"pctZeroBasal":41.9,"pctABcycles":27.7,"pctFailures":13.2},{"day":"2026-01-31","cycles":318,"pctPredLeSuspend":17.3,"pctZeroBasal":34.9,"pctABcycles":22,"pctFailures":13.5},{"day":"2026-02-01","cycles":295,"pctPredLeSuspend":23.1,"pctZeroBasal":46.1,"pctABcycles":26.4,"pctFailures":7.1},{"day":"2026-02-02","cycles":271,"pctPredLeSuspend":25.1,"pctZeroBasal":51.7,"pctABcycles":32.1,"pctFailures":0.7},{"day":"2026-02-03","cycles":289,"pctPredLeSuspend":12.1,"pctZeroBasal":56.1,"pctABcycles":36.7,"pctFailures":0},{"day":"2026-02-04","cycles":296,"pctPredLeSuspend":2.7,"pctZeroBasal":42.2,"pctABcycles":27,"pctFailures":5.1},{"day":"2026-02-05","cycles":306,"pctPredLeSuspend":12.1,"pctZeroBasal":32.4,"pctABcycles":20.9,"pctFailures":13.1},{"day":"2026-02-06","cycles":338,"pctPredLeSuspend":11.5,"pctZeroBasal":39.9,"pctABcycles":24.3,"pctFailures":16},{"day":"2026-02-07","cycles":284,"pctPredLeSuspend":18,"pctZeroBasal":38.7,"pctABcycles":25,"pctFailures":13},{"day":"2026-02-08","cycles":293,"pctPredLeSuspend":19.8,"pctZeroBasal":39.6,"pctABcycles":24.9,"pctFailures":9.9},{"day":"2026-02-09","cycles":329,"pctPredLeSuspend":16.7,"pctZeroBasal":43.8,"pctABcycles":31,"pctFailures":15.8},{"day":"2026-02-10","cycles":340,"pctPredLeSuspend":29.4,"pctZeroBasal":45.3,"pctABcycles":30.9,"pctFailures":13.2},{"day":"2026-02-11","cycles":337,"pctPredLeSuspend":15.1,"pctZeroBasal":39.5,"pctABcycles":26.7,"pctFailures":8},{"day":"2026-02-12","cycles":243,"pctPredLeSuspend":2.5,"pctZeroBasal":34.6,"pctABcycles":26.3,"pctFailures":16.5}]};
 const agp = {"tz":"America/Chicago","stepMin":5,"p05":[121,116,98,97,120.5,121.35000000000001,104,104,128.8,121.3,115.25,120.10000000000001,121.4,121.3,110,120.80000000000001,112,116,125.8,124.2,115.5,114.05,117.5,112.25,111.5,111,112.10000000000001,112.2,108.4,109,107.15,100.80000000000001,94,98.05,103.75,103,102.80000000000001,96,94.60000000000001,91.35,95.5,93.80000000000001,87.30000000000001,75,86.60000000000001,81.25,87.05000000000001,59,67,70.35,92.25,91.2,88.2,87,88.5,90,91.65,89.3,95,99.8,96,92,90,85.8,92.3,90.5,88.4,83,82,88.10000000000001,89.1,87.55000000000001,90,81,83,87,84.6,86.35,83.85,88.35,84.65,87,88.45,81.4,80.5,82.6,76.5,73.5,74,75.8,77.85,71.2,81,81.8,89,101,104.4,101.25,93,102.25,96.3,96.5,95,90.95,94,96,102.8,102.25,104,107.6,93,98.85000000000001,98.8,96.45,92,86.5,82,83,93,92,97.2,94.65,102.2,108.5,107,116.65,95.3,99,98,105,129,132.7,128.2,126.1,127.8,113,119.95,125,118.25,114.8,109,111.65,108.6,94.95,97.55,113,132,131,127.75,123.7,118.8,124,119.2,121.25,89,115,93,122.4,119.4,118.2,103,128.25,120.5,85,73,68,166,96.80000000000001,53,87.95000000000002,57,61,61,88.25,94.35000000000001,98,109.05,105.60000000000001,83,100,91.9,87.55000000000001,69,86.5,71,82,70,71,77.2,77.4,75.15,72,73.4,74.7,87.85,96.4,99.4,101.8,97.6,87.75,85.80000000000001,79,68,82.75,72,88,85.5,85.5,90,94,108.9,124.2,124.65,122.4,125.8,115,118.75,109,111.9,104.5,112.4,106.65,102.65,108,96.4,92.35000000000001,91.60000000000001,80.10000000000001,75.65,66,68.8,59,57,59.45,53.55,57.05,70.1,84.7,94.5,105.5,113.4,115.8,114.5,109.5,113.2,113.4,101.80000000000001,101.80000000000001,99.65,87.8,96.55000000000001,109.5,113.75,102,98.95,107.55000000000001,105.6,98,101.5,92,100.6,106,107,113.55,118.8,118,124,130.5,131.7,132,137,139.8,140.2,133.6,122,116,127.5,126.5,128.5,108,126.80000000000001,102,125,118.9,119,118.80000000000001,118.5,122.8],"p25":[153,155.5,151,154,153.5,152,154.5,155,158,150,150,155,158,156.25,150,148.75,141,136,155,145,146,133.5,142,138,142,136,137.75,138.75,131,128,129.5,129,132,130,127,129,124,118,116,123,118.5,114,118,115.5,115,114,115,116,110,109,113,111,111,111,113.5,106,103,108,109,111,104.5,99.5,102,102.25,108,98,101,100,101,102.5,102,103.25,103.5,103,99,98,98,94,101,94.75,93,91.75,93,90,92,90,92,89.75,84,91,95,92,95,98,108,106.5,110,114,120,119,104,112,112,116.25,119,123,130,135.25,131.5,128,128,124,123.5,108,108,129,114,130,127.75,134,134,133,134,133,132,144,142,142.5,143,142.5,153,148,149,148,152,142,146,153.5,155.25,145,137.5,143,133,135,142,129,138,183,177,166,168,180.75,183,188,179.75,191,187,190.75,175,187,184,182,189,194,204,210,210,213,203.5,203,182.5,179,160,173,160,167,153,148,146.5,163,157,150.75,156,160,145,128,130.5,132,125,123.25,130,124,125,123.25,120.75,112,119,112,112,111.5,116,117,109.5,130,122,133,136.5,129,134,138,129,135,150,152,153,145.75,148,158,153,150.5,155,151.25,139.75,144,145,144,152.5,160,160,154,148,108,87,123,116.5,120.25,118,113,127,132,134,140.25,142,144,154,156,154,168,172.25,163,156,149.5,152,156,148,151.25,154,147,143,160,169,172,170.5,158,193,164,172,168,163.5,154,149,150,150,147,144,145.25,148,149,160.5,154,159,154,171,149,149.5,148,151,149],"p50":[189,165,172,178,194,187,179.5,172,173,186,172,173,176,177,176,178.5,173.5,172,178,175,168,154,158,166,157,149,147.5,152,139,138,144,141,140,137,137,139,132,135,137,136,137,138,124,140,140,140,139,135,130,132,134,133,129,125.5,124,122,121,119.5,118,118,115,112,117,118.5,138,123,126,122,120,121.5,115,112,107,117,117,108,103,106,104,111,105.5,102,98,98.5,93.5,96,98,94,97,102,113,123,121,115,128,124,129,128,126,136,131,145,157,155.5,154,154,164,162.5,168,175,176,168,171,172,171,177,184,175,183,186,192,188.5,183,205,175,190,194.5,210,199,204,206,198,192,181,181,177,173.5,174,187,183,171,163,172,156,163.5,169,178,188,194,210,207,215.5,215,226,228,222,225,233.5,229,253,243,234,254,237,235,232,233,230,220,218,207,213,230,186,182,188,195,194,177,175,179.5,181,180,181,181,179,184,192,171,168,155,176,177,179,158.5,148,146,138,136,159,155,144,140,143,143,147,152,142,157,155,148,157,165,160,170.5,173,177.5,186,181,172,169,170,172,162,164,173,165,172.5,167,186,188,178,170,161,151,150,151,157,155,158,156,154,150,166,194,198,200,189,183.5,177,186,188,201,247,224.5,224.5,216.5,198,193,198,206,216,211,214,212,202,199,208,200.5,193,198,195,192,202,205,196.5,209,183,207,201,184,188,185,186,197,184.5,197,175.5],"p75":[229,230,225,234,246,236,224.5,225.5,227.5,235,230,222.5,211,217,218,220,222,211,204,215,198.5,197.75,198.5,206,181,199,213,210,201,195,191,190,183,178.75,166,161,154.25,158,156,154,149,147,147.25,151,152,152,150,149,150,154.75,155,149,143,146,153,156,151,144,144,143,144,144,144,143.5,146,145,145,143,143,142.5,142.75,139.25,134,132,128,123,120.5,121,115,119.75,114,111,107,110.75,105,105,107.5,106,107.5,113,123,145,146.75,132,163,154,175,169,193,204,159,200,193,195,170,197,193,195,192.5,192,194,200,187,189,197,199,209,211,210.25,210,215,231.25,232,235,232,242,230.5,229,228,232,231,228.25,224,216,210,205,196,186,201.75,214,198.5,196.25,198,192.5,191,199,204,216,243,248,240,253,243.5,241.75,249,258,272,279,290.25,286,295,269.75,295,295,302,295,302,287,285,287,280,275,269,255,237,255,236.25,249,236.5,235,242,235,238,235,228,211,230.5,237.25,237,222,210,214,203,202,183,174,252,259,180,184,187,177,177.25,169,166,161,203,216,220,227,211,188,195,198,228,207.5,227,207,205.25,208,201,184,196.25,181,181,204,200,204,204.25,199,198,203.5,212,228,230.25,221,209,217,227.25,237,204,245,229.5,238,246,242,256,277,265,222,235,248,268,270,270.25,278.5,273,283,276,282,268,268,270,257,290,238,256,257,262,266,266,262,264,268,263,259,252,240,260,261,254.25,259,258,246.5,248,239,229,227],"p95":[279.5,279,281.9999999999999,290,291,284.79999999999995,282.5,284,279,271.25,269,272.5,273.2,274.79999999999995,277,278.3499999999999,270.69999999999993,280.64999999999986,269.99999999999994,303,277.5,285.2999999999999,277,274.2499999999998,260.5,258.5,260.89999999999975,257.9999999999998,263.3999999999998,253.5,235.09999999999982,252.99999999999983,251.5,266.0499999999999,248.04999999999995,252,241.39999999999986,242.5999999999999,252.59999999999985,255.5499999999999,241,230.9999999999999,242.89999999999978,268,262,245.25,228.3999999999998,210.84999999999985,215.39999999999995,207.94999999999996,211.24999999999977,210.79999999999984,169,191.24999999999994,195,193.5,189.69999999999996,209,186.5999999999999,175.39999999999995,176.6999999999999,178,173.79999999999998,171.34999999999997,176,196,183.59999999999994,186,166,163.64999999999992,174,164.0499999999999,158.5,153.79999999999995,153.5,148.99999999999997,132.59999999999997,147.29999999999993,129.79999999999998,145.74999999999994,153,135.34999999999997,129.1,131,121.75,131,154,147.64999999999992,131.95,136,136.3,157,167,202.39999999999998,220.9999999999999,249.75,276,269.75,266.0999999999999,285,284.79999999999984,309,319,318,274.9999999999999,278.39999999999986,332,281.64999999999975,316,260.9999999999999,294,265.8499999999998,270.6999999999998,266.64999999999986,261.19999999999993,252.5,248.5,252,250.35,245.1,249.8,245.59999999999997,254.6,267,264.79999999999995,278.04999999999995,277.9499999999999,270.5,283.79999999999984,290.5,295.5999999999998,291.69999999999993,299.79999999999984,309.64999999999986,312.5999999999998,294.5,299.2999999999999,287.5,292.0499999999997,285.79999999999984,270.5,270.9499999999998,265.5999999999998,265.6999999999999,257.39999999999986,239.19999999999996,238.9,253.59999999999997,257,276.75,295,310,289.7,284.55,282.3,283,298.5,310,315.0499999999999,342,352,344.34999999999997,353,342.5999999999999,348,350.09999999999997,358,364.59999999999997,350.9,348.95,332.5,324.54999999999995,313.5,270,310.64999999999986,341.5,323.84999999999997,327.19999999999993,331.9,353,329.19999999999993,295.0999999999997,348,347,338.1999999999998,393,396,375.2999999999999,391.19999999999993,353.0999999999998,320.89999999999964,377.5999999999999,369.7999999999999,342.99999999999994,293.49999999999994,342.7999999999999,339.5999999999998,380,348.1999999999998,352.14999999999986,355.5999999999998,358.7499999999999,354.0999999999997,375.25,347,368.79999999999995,348.5,344.5,346.5,342.5,348.24999999999966,352.39999999999975,341.94999999999965,345.9999999999997,320.9999999999999,311.1499999999999,305.6999999999998,275.5,258.54999999999995,273,269,260,269,236,201.79999999999998,250.4999999999998,241.8999999999997,264.44999999999976,218.49999999999997,231.75,241.79999999999995,250.5,269,245.8499999999999,270.54999999999995,263.4,266.7,252.44999999999993,265,262.5,273.4,299.75,315,316,343,358,337.39999999999986,339.5999999999999,358,295.4,288.24999999999994,292.5,314.15,300,300,301.6499999999999,309.3,319.8,327,330.2,329.59999999999997,321.4,315,307.75,319,319,301,310,310.54999999999995,306,304.2,304.59999999999997,303.4,305.19999999999993,297.49999999999994,300.3,307,307,323,318,293.49999999999994,293.5,311,288.4499999999999,291.5,307,289.2499999999999,281.54999999999995]};
 if(window.Chart){
  const tir = (review.meta && review.meta.tir) || metrics.tir || {};
  new Chart(document.getElementById('tir').getContext('2d'),{
    type:'doughnut', data:{labels:['<54','<70','70-180','>180','>250'],datasets:[{data:[tir.veryLow||0, (tir.low||0)-(tir.veryLow||0), tir.inRange||0, (tir.high||0)-(tir.veryHigh||0), tir.veryHigh||0], backgroundColor:['#8e44ad','#3498db','#2ecc71','#e67e22','#e74c3c']}]} , options:{plugins:{legend:{position:'bottom'}}, cutout:'60%'}
  });
  const days = (overlay.days||[]).map(d=>d.day);
  const predL = (overlay.days||[]).map(d=>d.pctPredLeSuspend);
  const fails = (overlay.days||[]).map(d=>d.pctFailures);
  new Chart(document.getElementById('overlay').getContext('2d'),{ type:'line', data:{labels:days, datasets:[{label:'Pred ≤ suspend %', data:predL, borderColor:'#e67e22', tension:0.2},{label:'Pump comm errors %', data:fails, borderColor:'#e74c3c', tension:0.2}]}, options:{responsive:true, plugins:{legend:{position:'bottom'}}, scales:{y:{min:0,max:60,ticks:{stepSize:10}}}} });
  const labels = Array.from({length:(agp.p50||[]).length}, (_,i)=> i*5);
  const ctxAgp = document.getElementById('agp').getContext('2d');
  new Chart(ctxAgp,{ type:'line', data:{labels, datasets:[ {label:'P95', data:agp.p95||[], borderColor:'rgba(231,76,60,0.2)', backgroundColor:'rgba(231,76,60,0.1)', fill:'+1', pointRadius:0}, {label:'P75', data:agp.p75||[], borderColor:'rgba(230,126,34,0.2)', backgroundColor:'rgba(230,126,34,0.15)', fill:'+1', pointRadius:0}, {label:'Median', data:agp.p50||[], borderColor:'#2c3e50', pointRadius:0}, {label:'P25', data:agp.p25||[], borderColor:'rgba(46,204,113,0.2)', backgroundColor:'rgba(46,204,113,0.15)', fill:'-1', pointRadius:0}, {label:'P05', data:agp.p05||[], borderColor:'rgba(52,152,219,0.2)', backgroundColor:'rgba(52,152,219,0.1)', fill:false, pointRadius:0} ]}, options:{plugins:{legend:{display:false}, annotation:{annotations:{ targetBand:{type:'box', yMin:70, yMax:180, backgroundColor:'rgba(39,174,96,0.07)'} } }}, scales:{x:{title:{display:true,text:'Minutes of day'}}, y:{min:40,max:360}} });
 }
</script>
</body></html>